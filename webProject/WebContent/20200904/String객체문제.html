<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>String 객체 문제</title>
		<link href ="../CSS/public.css" rel ="stylesheet">
		<script>
		function proc1(){
			
			
			reg = prompt("주빈번호를 입력하세요","'-'포함");
			
			//각 자릿수 지정해서 문자열 추출
			reg1 = reg.slice(0, 2) ; //앞 두자리
			
			
			reg22 = reg.slice(2, 3) //3번째자리
			
			if(reg22 == "0"){
			reg2 = reg.slice(3, 4) ;
				
			}else{
				reg2 = reg.slice(2, 4)
			} //3,4번째
			
			
			
			reg3 = reg.slice(4, 6) ;//일자
			
			regGend = reg.slice(7, 8); //성별
			
			//비교 1900/2000 성별비교
			
		
			//성별비교
			if(regGend == 2){gender = "여자";str ="19";}
			else if(regGend == 1){gender ="남자";str ="19";}
			else if(regGend == 4){gender = "여자";str ="20";}
			else if(regGend == 3){gender = "남자";str ="20";}
			else{
				alert("성별을 구분할 수 없습니다 다시입력하세요");
				return false;
			}
			
			//나이 추출
			
			today = new Date();
			/*<!-- 나이는 현재년도 - 자신의 년도 new date를 통해서 today.getFullYear - 2011년도 -->*/
			nowYear = today.getFullYear();
			
			myYear1 = str + reg1;
			
			myYear = new Date(myYear1);
			
			myYear2 = myYear.getFullYear();
			
			age = nowYear - myYear2 +1;
			
		
			//출력내용 작성
			
			res = "생일 : " + myYear2 + "년 " + reg2 +"월 " + reg3 +"일" + "<br>"; 
			res += "성별 : " + gender + " " + "나이 :  " + age;
			
			document.querySelector('#result1').innerHTML =res;
			
		}
		
		function proc2(){
			//곱하는 값을 문자열
			
			str ="234567892345";
			
			//주민번호 입력
			reg = prompt("주빈번호를 입력하세요","'-'포함");
			
			regA = reg.splice(6,1);
			
			res = regA;
			
			document.querySelector('#result2').innerHTML = res;
			
			
			sum = 0;
			cnt =0;
			for(i = 0; i<reg.length;i++){
				
				//str의 한자리와 주민번호 한자리씩 추출
				b = str.charAt(cnt);
				a = reg.charAt(i);
				if(a == "-"){
					continue;
				}
				cnt++;
				//곱하기 하고 총합을 구한다
				
				sum += a*b;
			}
			
			//11-(sum % 11)
			
			rem = 11-(sum % 11);
			
			if(rem = 10){
				 
				compare = 0;
			}else if(rem ==11){
				compare = 1;
			}else{
				
				compare = rem;
				
			}
			
			//값 비교 10이면 0,11이면 1로 변환
			
			//최종 a 값과 주민번호 마지막 자리(lastindexOf)의 값이 같으면 맞는 번호이다
	
			reg.charAt(13)reg.charAt(13)
			
		}
		
		
		
		</script>
	</head>
	<body>
		
		<div class ="box">
			<h3>String 객체 문제</h3>
			주민등록번호를 입력 받아 생년월일과 성별을 출력하는 프로그램을 작성하시오.(입력은 prompt로 입력받는다.)<br>
			예) 주민등록번호를 110326-4432618로 입력 받은 경우<br>
			생일 : 2011년 3월 26일<br><!-- 문자열 추출 subString slice substr charAt -->
			성별 : 여자  나이: <br><!-- 나이는 현재년도 - 자신의 년도 new date를 통해서 today.getFullYear - 2011년도 -->
			<input type = "button" value ="확인" onclick ="proc1()">
			<div id = "result1"></div>
		</div>
		<div class ="box">
			<h3>String 객체 문제</h3>
			주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는 프로그램을 작성하시오.(ABCDEF-GHIJKLM)<br>
			A*2 + B*3 + ... + H*9 + I*2 + ... + L*5 의 총합을 구한다.<br>
			1번의 합을 11로 나눈 나머지를 구한다.<br>
			11에서 2번의 결과를 뺀다.<br><!-- substr, -->
			3번의 결과가 0~9이면 값 그대로, 10이면 0, 11이면 1로 변환<br>
			4번의 결과와 M자리의 값이 같으면 맞는 번호이다.<br>
			<input type = "button" value ="확인" onclick ="proc2()">
			<div id = "result2"></div>
		</div>
	</body>
</html>